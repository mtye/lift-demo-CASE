 * Notes for Step 0

The pom.xml file and the contents of the src directory were generated by Maven
using the following command:

  mvn archetype:generate -U -DarchetypeGroupId=net.liftweb \
                            -DarchetypeArtifactId=lift-archetype-basic \
                            -DarchetypeVersion=2.0-M3

And specifying:

  "com.marktye"      for the groupId,
  "lift-demo-CASE"   for the artifactId,
  "1.0-SNAPSHOT"     for the version, and
  "com.marktye.rhcp" for the package.

The Maven-generated web application can be compiled and executed with the
command:

  mvn jetty:run


 * Notes for Step 1

As a precursor to developing the Giveaway application, some of the artifacts
generated by the Maven archetype were deleted or changed.

The application does not serve any static files, so the "static" directory
under src/main/webapp was deleted, along with the corresponding menu entry in
the Boot.scala file.

The "lift-archetype-basic" archetype uses the artifactId specified in the
generation process to customize several elements of the application's "chrome",
e.g., the home page, the default page title, and the header. The artifactId
used in this case, "lift-demo-CASE", is somewhat inelegant, so the default
template and home page were changed to use the title "RHCP" instead.


 * Notes for Step 2

The first feature for the Giveaway application is a page for creating new
giveaways. A template named "create.html" was created in the
"src/main/webapp/giveaway" directory. This template uses the "lift:surround"
tag to embed its content within the default template, thus retaining the same
layout, styling, and menu as the home page.

The "<lift:Giveaway.create>" tag in the template references a method named
"create" in the "Giveaway" snippet, which is in the com.marktye.rhcp.snippet
package. This method binds dynamic content to tags within the
"<lift:Giveaway.create>" tag. The "<g:name>" tag is bound to an "input" form
element of type "text", the "<g:description>" tag is bound to a "textarea"
form element, and the "<g:submit>" tag is bound to a submit button.

The form elements are generated with the net.liftweb.http.SHtml object, which
has a wide variety of helper methods for creating HTML markup. The second
parameter to the "text" and "textarea" methods is a function that will be
invoked when the form is submitted. These functions are used to capture the
values of the input and textarea elements and assign them to local variables.
The second parameter to the "submit" method is also a function that is invoked
when the form is submitted. It sends a success message to the notification area
below the menu and redirects the user to the home page.

Finally, a menu item for the new page was created in the Boot.scala file and
added to the list of menu entries. The menu item tells Lift to make the new
page accessible at a relative URL of "giveaway/create" and display a
corresponding menu link with the title "Create New Giveaway".


 * Notes for Step 3

In this step, a page was created to display the giveaways. A template named
"list.html" was created in the giveaway directory. Just as in the previous
chapter, the "lift:surround" tag embeds this template within the default
template.

The "<lift:Giveaway.list>" tag links the template to the "list" method in the
Giveaway snippet, which generates all the dynamic content within the tag. The
giveaways are displayed in an HTML table, with the name in the first column
and the description in the second column.

In order to display the giveaways, the application must keep track of them as
they are created. To do this, a Giveaway companion object was created and
given a variable that stores giveaways as a list of (String, String) pairs.
Since companion objects are singletons, this list of giveaways is accessible
to all instances of the Giveaway snippet.

The "create" method in the Giveaway snippet was modified to add each newly-
created giveaway to the companion object's list of giveaways. The method's
redirect was also changed to send the user to the giveaway list page after
each new giveaway is created.

In the "list" method, each giveaway in the companion object's list is mapped
to the result of a "bind" method, which binds the "<g:name/>" tag in the
template to the giveaway's name, and the "<g:description/>" tag to the
description. The "chooseTemplate" method in the bind sets the binding context
to the "<g:giveaways>" tag. The net result is that the content outside the
<g:giveaways> tag - i.e., the <table>, <thead> and <tbody> tags - is preserved
as-is, while the content inside the "<g:giveaways>" tag is repeated for
each giveaway in the list, with the name and description tags bound to the
appropriate value for each giveaway.

Finally, a menu item for the list page was added to the Boot.scala file. The
menu item has a title of "List Giveaways" and links to the relative URL
"giveaway/list".


 * Copyright and License

Copyright Â© 2010 Mark Tye

This work is licensed under the Creative Commons Attribution-Noncommercial-Share
Alike 3.0 United States License. To view a copy of this license, visit

  http://creativecommons.org/licenses/by-nc-sa/3.0/us/
